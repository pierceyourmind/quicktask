---
phase: 02-task-data-model-persistence-capture-ui
plan: "03"
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - QuickTask/Sources/Views/TaskListView.swift
  - QuickTask/Sources/Views/TaskRowView.swift
autonomous: true
requirements: [TASK-01, TASK-02, TASK-03, TASK-04]

must_haves:
  truths:
    - "Each task in the list has a checkbox that toggles completion"
    - "Completed tasks show strikethrough text and reduced opacity (faded row)"
    - "Completed tasks remain visible in the list — they are not filtered or auto-deleted"
    - "Each task has a delete button that removes it permanently"
  artifacts:
    - path: "QuickTask/Sources/Views/TaskRowView.swift"
      provides: "Single task row with checkbox, strikethrough, opacity, and delete button"
      contains: ".toggleStyle(.checkbox)"
    - path: "QuickTask/Sources/Views/TaskListView.swift"
      provides: "List rendering TaskRowView for each task"
      contains: "TaskRowView"
  key_links:
    - from: "QuickTask/Sources/Views/TaskRowView.swift"
      to: "QuickTask/Sources/Store/TaskStore.swift"
      via: "@Environment(TaskStore.self) calling store.toggle() and store.delete()"
      pattern: "store\\.(toggle|delete)"
    - from: "QuickTask/Sources/Views/TaskListView.swift"
      to: "QuickTask/Sources/Views/TaskRowView.swift"
      via: "List body renders TaskRowView(task:) for each task"
      pattern: "TaskRowView\\(task:"
---

<objective>
Create the TaskRowView with checkbox, strikethrough, reduced opacity for completed tasks, and a delete button. Update TaskListView to use TaskRowView instead of the minimal Text placeholder from Plan 02.

Purpose: Completes the task management UI — users can mark tasks done (visual feedback via strikethrough + fade) and delete tasks permanently. Combined with Plans 01 and 02, this delivers the full Phase 2 experience.

Output: TaskRowView.swift created with full checkbox/strikethrough/opacity/delete behavior. TaskListView.swift updated to render TaskRowView for each task.
</objective>

<execution_context>
@/home/rob/.claude/get-shit-done/workflows/execute-plan.md
@/home/rob/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-task-data-model-persistence-capture-ui/02-RESEARCH.md
@.planning/phases/02-task-data-model-persistence-capture-ui/02-01-SUMMARY.md
@.planning/phases/02-task-data-model-persistence-capture-ui/02-02-SUMMARY.md
@QuickTask/Sources/Views/TaskListView.swift
@QuickTask/Sources/Store/TaskStore.swift
@QuickTask/Sources/Model/Task.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TaskRowView with checkbox, strikethrough, opacity, and delete</name>
  <files>
    QuickTask/Sources/Views/TaskRowView.swift
  </files>
  <action>
Create TaskRowView.swift — the individual task row with all visual states and actions.

**QuickTask/Sources/Views/TaskRowView.swift:**
- `import SwiftUI`
- `struct TaskRowView: View`
- `@Environment(TaskStore.self) private var store`
- `let task: Task` — the task this row displays (passed from TaskListView)
- Body: `HStack` containing:
  1. **Checkbox Toggle:** `Toggle(isOn: Binding(get: { task.isCompleted }, set: { _ in store.toggle(task) }))` with label `Text(task.title).strikethrough(task.isCompleted)`. Apply `.toggleStyle(.checkbox)` — this is the native macOS checkbox style (macOS-only API, confirmed available). The custom Binding routes the set through `store.toggle()` instead of mutating the struct directly.
  2. **Spacer()** — pushes delete button to the right
  3. **Delete Button:** `Button { store.delete(task) } label: { Image(systemName: "trash").foregroundColor(.secondary) }` with `.buttonStyle(.plain)` to avoid default button chrome in a List row. Add `.help("Delete task")` for accessibility tooltip.
- Apply to the entire HStack: `.opacity(task.isCompleted ? 0.4 : 1.0)` — fades the ENTIRE row (checkbox + text + delete button) when complete, not just the text
- Apply `.animation(.easeInOut(duration: 0.2), value: task.isCompleted)` for smooth transition when toggling completion

Key design decisions from research:
- `.toggleStyle(.checkbox)` is macOS-only and matches HIG exactly — do NOT hand-roll a custom checkbox
- Strikethrough is on the Text label inside the Toggle, opacity is on the entire HStack row
- Delete button uses `.plain` button style — default style adds unwanted chrome inside List rows
- Completed tasks are NEVER filtered out of the list (TASK-03 requirement) — only visual styling changes
- Tasks display in insertion order, no sorting (research Open Question 3)
  </action>
  <verify>
Verify TaskRowView.swift contains:
- `@Environment(TaskStore.self)`
- `let task: Task`
- `.toggleStyle(.checkbox)`
- `.strikethrough(task.isCompleted)`
- `.opacity(task.isCompleted ? 0.4 : 1.0)` on the HStack or outer container
- `store.toggle(task)`
- `store.delete(task)`
- `Image(systemName: "trash")`
- `.buttonStyle(.plain)`
  </verify>
  <done>
TaskRowView exists with native macOS checkbox toggle, strikethrough text for completed tasks, 0.4 opacity fade on the entire row, delete button with trash icon, and smooth animation on completion toggle.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update TaskListView to use TaskRowView</name>
  <files>
    QuickTask/Sources/Views/TaskListView.swift
  </files>
  <action>
Update TaskListView.swift to replace the minimal `Text(task.title)` placeholder (from Plan 02) with the full `TaskRowView(task:)`.

**QuickTask/Sources/Views/TaskListView.swift:**
- Keep `@Environment(TaskStore.self) private var store`
- Replace the List body. Change from `List(store.tasks) { task in Text(task.title) }` to:
  ```
  List(store.tasks) { task in
      TaskRowView(task: task)
          .listRowSeparator(.hidden)
  }
  .listStyle(.plain)
  ```
- `.listRowSeparator(.hidden)` on each row because TaskRowView provides its own visual structure and the default separators add visual noise
- Keep `.listStyle(.plain)` for clean appearance without sidebar-style insets

Do NOT filter completed tasks out of `store.tasks` — TASK-03 explicitly requires completed tasks to remain visible. The list shows ALL tasks in insertion order.
  </action>
  <verify>
Verify TaskListView.swift contains:
- `TaskRowView(task: task)` (not `Text(task.title)`)
- `.listRowSeparator(.hidden)`
- `.listStyle(.plain)`
- `List(store.tasks)` (no filtering)
  </verify>
  <done>
TaskListView renders TaskRowView(task:) for each task with hidden row separators and plain list style. All tasks (including completed) are displayed in insertion order.
  </done>
</task>

</tasks>

<verification>
- TaskRowView has checkbox toggle calling store.toggle(), strikethrough on completed text, 0.4 opacity on completed rows, delete button calling store.delete()
- TaskListView renders TaskRowView for each task — no Text placeholder remains
- Completed tasks remain in the list (no filtering)
- Tasks display in insertion order (no sorting)
- .toggleStyle(.checkbox) used for native macOS checkbox appearance
- .buttonStyle(.plain) on delete button to avoid chrome in List
</verification>

<success_criteria>
- Each task row shows a native macOS checkbox that toggles isCompleted via TaskStore
- Completed tasks show strikethrough text AND the entire row fades to 0.4 opacity
- Completed tasks remain visible in the list (never filtered out)
- Each task has a trash icon delete button that removes it permanently via TaskStore
- The full Phase 2 flow works end-to-end: hotkey opens panel, text field auto-focuses, type + Return adds task, task appears with checkbox, check/uncheck works with visual feedback, delete removes task, quit + relaunch preserves all tasks
</success_criteria>

<output>
After completion, create `.planning/phases/02-task-data-model-persistence-capture-ui/02-03-SUMMARY.md`
</output>
